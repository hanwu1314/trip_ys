import{c as q,d as E,q as C,aM as X,n as j,t as G,v as H,a as d,K as V,aK as J,I as B,w as K,a9 as W,a3 as A,b as D,k as Q,a4 as s,a5 as o,aL as w,a8 as e,G as f,af as $,aA as Y,ad as c,ai as S,aj as U,ah as z,a6 as M,a7 as P,aN as tt,ag as F,C as et,aO as st,ae as ot}from"./index-6b5df6f3.js";import{h as at}from"./index-d805b1e0.js";import{a as nt,S as ct}from"./index-1541bef0.js";import{R as it}from"./index-7f3225ef.js";const[lt,I]=q("nav-bar"),dt={title:String,fixed:Boolean,zIndex:j,border:G,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:G};var rt=E({name:lt,props:dt,emits:["clickLeft","clickRight"],setup(t,{emit:i,slots:n}){const a=C(),r=X(a,I),_=l=>i("clickLeft",l),y=l=>i("clickRight",l),p=()=>n.left?n.left():[t.leftArrow&&d(B,{class:I("arrow"),name:"arrow-left"},null),t.leftText&&d("span",{class:I("text")},[t.leftText])],g=()=>n.right?n.right():d("span",{class:I("text")},[t.rightText]),m=()=>{const{title:l,fixed:h,border:u,zIndex:v}=t,x=H(v),k=t.leftArrow||t.leftText||n.left,T=t.rightText||n.right;return d("div",{ref:a,style:x,class:[I({fixed:h}),{[J]:u,"van-safe-area-top":t.safeAreaInsetTop}]},[d("div",{class:I("content")},[k&&d("div",{class:[I("left"),t.clickable?V:""],onClick:_},[p()]),d("div",{class:[I("title"),"van-ellipsis"]},[n.title?n.title():l]),T&&d("div",{class:[I("right"),t.clickable?V:""],onClick:y},[g()])])])};return()=>t.fixed&&t.placeholder?r(m):m()}});const _t=K(rt);function ut(t){return at.get({url:"/detail/infos",params:{houseId:t}})}const O=W("details",{state:()=>({detailInfos:{},mainPart:{},swipeData:[],topModule:[]}),actions:{async fetchGetDetailInfos(t){const i=await ut(t);this.detailInfos=i.data,this.mainPart=i.data.mainPart,this.swipeData=i.data.mainPart.topModule.housePicture.housePics,this.topModule=i.data.mainPart.topModule}}});const mt={class:"swiper"},ht=["src"],vt={class:"indicator"},pt=["onClick"],ft={key:0,class:"count"},yt={__name:"detail_01-swiper",setup(t){const i=O(),n=D(()=>i.swipeData),a=C({});Q(n,l=>{a.value=l.reduce((h,u)=>{let v=u.enumPictureCategory;return h[v]||(h[v]=[]),h[v].push(u),h},{})});const r=/【(.*?)】/i,_=l=>r.exec(l)[1],y=l=>a.value[l.enumPictureCategory].findIndex(u=>u===l)+1,p=C(null),g=(l,h)=>{const u=m(a.value,h);u!==-1&&p.value.swipeTo(u)},m=(l,h)=>{let u=0;for(const v of Object.keys(l)){if(v===h)return u;u+=l[v].length}return-1};return(l,h)=>{const u=nt,v=ct;return s(),o("div",mt,[d(v,{class:"swipe-list",autoplay:3e3,ref_key:"detailSwiper",ref:p},{indicator:w(({active:x,total:k})=>[e("div",vt,[(s(!0),o(f,null,$(a.value,(T,N,us)=>{var L,R;return s(),o(f,{key:N},[e("span",{class:Y(["title",{active:((L=n.value[x])==null?void 0:L.enumPictureCategory)==N}]),onClick:ms=>g(T,N)},c(_(T[0].title)),11,pt),((R=n.value[x])==null?void 0:R.enumPictureCategory)==N?(s(),o("span",ft,c(y(n.value[x]))+" / "+c(T.length),1)):S("",!0)],64)}),128))])]),default:w(()=>[(s(!0),o(f,null,$(n.value,(x,k)=>(s(),U(u,{class:"item"},{default:w(()=>[e("img",{src:x.url,alt:""},null,8,ht)]),_:2},1024))),256))]),_:1},512)])}}},gt=A(yt,[["__scopeId","data-v-17fef7e1"]]),xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAhFBMVEUAAACNps6Ops6Ops2Ops6PqM+VrNGNps2Opc2Ops6Npc2Nps6Nps+Ops6Nps+PqM6OqNCPrdaZs+aSttuNpc3////Y4O73+fvh6PKSqdDc4/DJ1Oe6yeGsvtv6+/2ar9OXrdHx9Pjr7/bm6/TT3Oy+y+Kzw93D0OTCz+Snutiittaes9QGoYniAAAAFHRSTlMA+sfDoD8V8Ozfs6Z5c3BJRhkKB25FGXIAAAH+SURBVEjHpZfploIwDIWLMI4ig6gpmwIuuL//+82Zhaq5qeLp9zOn19RspEpmnkTBYDzyvNF4EETJXPVmGPsePeD58bCX9CP0SMALP15LfbLiP5fPJvSUycyunX7SCz6nNu0X9eBLlC4C6kWwEPIzoJ4MhuAXtXY19x3QGwTWWL0dtSm9yV3GZmJ+q2Wa5+myEvN9qxahrtZtpv/J2rVQa6aeCTjW+o76SEBX59ALRakZZQFdYnFc7DSwK2TXITenWiAlRvhbl7z391pkz6fDT5XG/NKZLM74xWMhXEttYYkhm/Nb3xznh6Y55DfX/N5zlTDT2Rw+/RlOxnBmRxMV8VtDeFPbvSMV2PLUdJbGlq1A8SHQ/ccNGTZdDPhQUGNm2ZqT8HtbdnSsRihGz7J4pHimTF2vTXea+ua5MmIIWNtZWlvAPLj2SnesuGHPrw0BW9e3Jq6Koiq1oYGAwbxutYUS5jcO7ItNXOH4jogDM8jEGsozAVtTi+ILHExMS8IowW7GllQ+ATlqtwVJ8zMWJv4GZtCVgNgMQBbxWow0DkAVEnJ41K4ICdnQZ1VqOBJZvze+qIZAQ7jQNapPZHNsPrHIoTb/F5mwjztwzrTOKpI/7i/XimtZXklk6rLQuKxSTkucy/rosrg6rMwuy7rLM8H1geL+NHJ/lDk9B78B/w/hQ4wx2noAAAAASUVORK5CYII=";const Z=t=>(M("data-v-c61dafdb"),t=t(),P(),t),$t={class:"infos"},It={class:"name"},At={class:"tags"},wt={key:0,class:"item"},St={class:"commentBox"},kt={class:"comment"},Tt={class:"comment-score"},Mt={class:"score"},Pt={class:"count"},bt={class:"position"},Nt={class:"left"},Ct={class:"title"},Dt={class:"address"},Bt=Z(()=>e("div",{class:"right"},[e("img",{class:"map-icon",src:xt}),e("p",null,"地图/周边")],-1)),Ot=Z(()=>e("div",{class:"position"},null,-1)),Lt={__name:"detail_02-infos",setup(t){const i=O(),n=D(()=>i.topModule);return(a,r)=>{var y,p,g,m;const _=B;return s(),o("div",$t,[e("div",It,c(n.value.houseName),1),e("div",At,[(s(!0),o(f,null,$(n.value.houseTags,(l,h)=>{var u,v;return s(),o(f,{key:h},[(u=l.tagText)!=null&&u.text?(s(),o("span",wt,c((v=l.tagText)==null?void 0:v.text),1)):S("",!0)],64)}),128))]),e("div",St,[e("div",kt,[e("div",Tt,[e("span",Mt,c((y=n.value.commentBrief)==null?void 0:y.overall),1),z("分 "),e("span",Pt,[z(c((p=n.value.commentBrief)==null?void 0:p.totalCount)+"条 ",1),d(_,{name:"arrow"})])])]),e("div",bt,[e("div",Nt,[e("div",Ct,c((g=n.value.nearByPosition)==null?void 0:g.address),1),e("p",Dt,c((m=n.value.nearByPosition)==null?void 0:m.tradeArea),1)]),Bt])]),Ot])}}},Rt=A(Lt,[["__scopeId","data-v-c61dafdb"]]);const Gt=t=>(M("data-v-393415f5"),t=t(),P(),t),Vt={class:"section"},zt={class:"header"},Ft={class:"title"},Zt={class:"content"},qt=Gt(()=>e("h3",null,"我是默认内容",-1)),Et={key:0,class:"footer"},Xt={class:"more"},jt={__name:"detail_section",props:{title:{type:String,default:"默认标题"},moreText:{type:String,default:""}},setup(t){return(i,n)=>{const a=B;return s(),o("div",Vt,[e("div",zt,[e("h2",Ft,c(t.title),1)]),e("div",Zt,[tt(i.$slots,"default",{},()=>[qt],!0)]),t.moreText.length?(s(),o("div",Et,[e("span",Xt,c(t.moreText),1),d(a,{name:"arrow"})])):S("",!0)])}}},b=A(jt,[["__scopeId","data-v-393415f5"]]);const Ht=t=>(M("data-v-006dc7c0"),t=t(),P(),t),Jt={class:"facility"},Kt={class:"facility-inner"},Wt={key:0,class:"item"},Qt={class:"head"},Yt=["src"],Ut={class:"text"},te={class:"list"},ee=Ht(()=>e("i",{class:"icon_check icon"},null,-1)),se={__name:"detail_03-facility",props:{houseFacility:{type:Object,default:()=>({})}},setup(t){return(i,n)=>(s(),o("div",Jt,[d(b,{title:"房屋措施","more-text":"查看全部措施"},{default:w(()=>[e("div",Kt,[(s(!0),o(f,null,$(t.houseFacility.houseFacilitys,(a,r)=>{var _;return s(),o(f,{key:r},[(_=t.houseFacility.facilitySort)!=null&&_.includes(r)?(s(),o("div",Wt,[e("div",Qt,[e("img",{src:a.icon,alt:""},null,8,Yt),e("div",Ut,c(a.groupName),1)]),e("div",te,[(s(!0),o(f,null,$(a.facilitys.slice(0,4),(y,p)=>(s(),o("div",{key:p,class:"iten"},[ee,e("span",null,c(y.name),1)]))),128))])])):S("",!0)],64)}),128))])]),_:1})]))}},oe=A(se,[["__scopeId","data-v-006dc7c0"]]);const ae=t=>(M("data-v-8902fbaf"),t=t(),P(),t),ne={class:"landlord"},ce={class:"intro"},ie={class:"top"},le=["src"],de={class:"header"},re={class:"left"},_e={class:"avatar"},ue=["src"],me={class:"info"},he={class:"name"},ve={class:"tags"},pe={key:0,class:"divider"},fe=ae(()=>e("div",{class:"right"},[e("div",{class:"contact"},"联系房东")],-1)),ye={class:"bottom"},ge={class:"item"},xe={class:"title"},$e={class:"score"},Ie={class:"desc"},Ae={__name:"detail_04-landlord",props:{landlord:{type:Object,default:()=>({})}},setup(t){return(i,n)=>(s(),o("div",ne,[d(b,{title:"房东介绍","more-text":"查看房东主页"},{default:w(()=>[e("div",ce,[e("div",ie,[e("img",{src:t.landlord.topScroll,alt:""},null,8,le)]),e("div",de,[e("div",re,[e("div",_e,[e("img",{src:t.landlord.hotelLogo,alt:""},null,8,ue)]),e("div",me,[e("div",he,c(t.landlord.hotelName),1),e("div",ve,[(s(!0),o(f,null,$(t.landlord.hotelTags,(a,r)=>(s(),o("div",{class:"item",style:F({color:a.tagText.color})},[e("span",null,c(a.tagText.text),1),r!==t.landlord.hotelTags.length-1?(s(),o("span",pe,"|")):S("",!0)],4))),256))])])]),fe]),e("div",ye,[(s(!0),o(f,null,$(t.landlord.hotelSummary,(a,r)=>(s(),o("div",ge,[e("div",xe,c(a.title),1),e("div",$e,c(a.introduction),1),e("div",Ie,c(a.tip),1)]))),256))])])]),_:1})]))}},we=A(Ae,[["__scopeId","data-v-8902fbaf"]]);const Se=t=>(M("data-v-c5e71500"),t=t(),P(),t),ke={class:"comment"},Te={class:"comment-inner"},Me={class:"header"},Pe={class:"left"},be={class:"score"},Ne={class:"text"},Ce=Se(()=>e("div",{class:"line"},null,-1)),De={class:"info"},Be={class:"title"},Oe={class:"count"},Le={class:"star"},Re={class:"right"},Ge={class:"tags"},Ve={class:"content"},ze={class:"user"},Fe={class:"avatar"},Ze=["src"],qe={class:"profile"},Ee={class:"name"},Xe={class:"date"},je={class:"text"},He={__name:"detail_05-comment",props:{comment:{type:Object,default:()=>({})}},setup(t){const{comment:i}=t;return D(()=>Number.isInteger(i.overall)?i.overall.toFixed(1):i.overall),(n,a)=>{const r=it;return s(),o("div",ke,[d(b,{title:"热门评论","more-text":`查看全部${t.comment.totalCount}条评论`},{default:w(()=>{var _,y,p,g;return[e("div",Te,[e("div",Me,[e("div",Pe,[e("div",be,[e("span",Ne,c(Number.isInteger(t.comment.overall)?t.comment.overall.toFixed(1):t.comment.overall),1),Ce]),e("div",De,[e("div",Be,c(t.comment.scoreTitle),1),e("div",Oe,c(t.comment.totalCount)+"条评论",1),e("div",Le,[d(r,{modelValue:t.comment.overall,"onUpdate:modelValue":a[0]||(a[0]=m=>t.comment.overall=m),color:"#ff9645",size:"12",readonly:"","allow-half":""},null,8,["modelValue"])])])]),e("div",Re,[(s(!0),o(f,null,$(t.comment.subScores,(m,l)=>(s(),o("span",{key:m,class:"item"},c(m),1))),128))])]),e("div",Ge,[(s(!0),o(f,null,$(t.comment.commentTagVo,(m,l)=>(s(),o("span",{key:l,class:"item",style:F({color:m.color,background:m.backgroundColor})},c(m.text),5))),128))]),e("div",Ve,[e("div",ze,[e("div",Fe,[e("img",{src:(_=t.comment.comment)==null?void 0:_.userAvatars,alt:""},null,8,Ze)]),e("div",qe,[e("div",Ee,c((y=t.comment.comment)==null?void 0:y.userName),1),e("div",Xe,c((p=t.comment.comment)==null?void 0:p.checkInDate),1)])]),e("div",je,c((g=t.comment.comment)==null?void 0:g.commentDetail),1)])])]}),_:1},8,["more-text"])])}}},Je=A(He,[["__scopeId","data-v-c5e71500"]]);const Ke={class:"notice"},We={class:"notice-inner"},Qe={class:"title"},Ye={class:"intro"},Ue={key:0,class:"tip"},ts={__name:"detail_06-notice",props:{orderRules:{type:Array,default:()=>[]}},setup(t){return(i,n)=>(s(),o("div",Ke,[d(b,{title:"预定须知"},{default:w(()=>[e("div",We,[(s(!0),o(f,null,$(t.orderRules,(a,r)=>(s(),o("div",{key:r,class:"item"},[e("span",Qe,c(a.title),1),e("span",Ye,c(a.introduction),1),a.tips?(s(),o("span",Ue,"查看说明")):S("",!0)]))),128))])]),_:1})]))}},es=A(ts,[["__scopeId","data-v-49d2b941"]]);const ss={class:"home"},os={__name:"detail_07-map",props:{position:{type:Object,default:()=>({})}},setup(t){const i=t,n=C();return et(()=>{const a=new BMapGL.Map(n.value),r=new BMapGL.Point(i.position.longitude,i.position.latitude);a.centerAndZoom(r,15);const _=new BMapGL.Marker(r);a.addOverlay(_)}),(a,r)=>(s(),o("div",ss,[d(b,{title:"位置周边","more-text":"查看更多周边信息"},{default:w(()=>[e("div",{class:"baidu",ref_key:"mapRef",ref:n},null,512)]),_:1})]))}},as=A(os,[["__scopeId","data-v-31645ec5"]]);const ns={class:"intro"},cs={class:"title"},is={class:"content"},ls={__name:"detail_08-intro",props:{priceIntro:{type:Object,default:()=>({})}},setup(t){return(i,n)=>(s(),o("div",ns,[e("h2",cs,c(t.priceIntro.title),1),e("div",is,c(t.priceIntro.introduction),1)]))}},ds=A(ls,[["__scopeId","data-v-ce408101"]]),rs={class:"detail"},_s={key:0,class:"main"},ys={__name:"detail",setup(t){const i=()=>history.back(),a=st().params.id,r=O();r.fetchGetDetailInfos(a);const _=D(()=>r.mainPart);return(y,p)=>{var m,l,h,u,v,x,k;const g=_t;return s(),o("div",rs,[d(g,{title:"房屋详情","left-text":"旅途","left-arrow":"",onClickLeft:i}),ot(r).mainPart?(s(),o("div",_s,[d(gt),d(Rt),d(oe,{"house-facility":(l=(m=_.value.dynamicModule)==null?void 0:m.facilityModule)==null?void 0:l.houseFacility},null,8,["house-facility"]),d(we,{landlord:(h=_.value.dynamicModule)==null?void 0:h.landlordModule},null,8,["landlord"]),d(Je,{comment:(u=_.value.dynamicModule)==null?void 0:u.commentModule},null,8,["comment"]),d(es,{"order-rules":(x=(v=_.value.dynamicModule)==null?void 0:v.rulesModule)==null?void 0:x.orderRules},null,8,["order-rules"]),d(as,{position:(k=_.value.dynamicModule)==null?void 0:k.positionModule},null,8,["position"]),d(ds,{"price-intro":_.value.introductionModule},null,8,["price-intro"])])):S("",!0)])}}};export{ys as default};
