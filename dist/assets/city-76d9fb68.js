import{ak as Qe,a1 as Oe,a2 as be,$ as _t,W as et,U as St,i as wt,j as It,o as tt,c as X,n as N,m as ne,L as le,d as G,q as A,al as De,S as Ie,b as V,am as nt,e as oe,v as at,k as Y,s as me,an as _e,A as U,_ as te,ao as lt,ap as Tt,a as s,w as ae,X as Le,C as Ne,t as ie,aq as it,D as Rt,ar as $t,f as Se,x as W,as as Bt,at as Fe,au as Ke,H as At,av as Lt,aw as Et,r as ot,h as fe,ax as We,ay as Vt,az as Pt,E as ct,y as rt,z as st,aA as Ot,aB as zt,ag as Mt,J as He,O as we,u as Dt,I as he,aC as pe,aD as Nt,aE as Ft,V as Wt,aF as Ht,aG as pt,aH as Ue,aI as jt,p as ve,ah as qt,aJ as Kt,F as Ut,Q as Yt,aK as Zt,a3 as ut,aa as dt,a4 as K,a5 as ee,aL as ft,a8 as ze,G as ue,af as ge,ad as Xt,aj as Me,ab as Gt,ae as Ye}from"./index-6b5df6f3.js";import{u as ht}from"./city-90c34e98.js";import{a as ce,b as Jt,u as Qt}from"./index-d805b1e0.js";import{S as en,a as tn}from"./index-1541bef0.js";function nn(e,n,l){let c,o=0;const a=e.scrollLeft,u=l===0?1:Math.round(l*1e3/16);function h(){Qe(c)}function i(){e.scrollLeft+=(n-a)/u,++o<u&&(c=Oe(i))}return i(),h}function an(e,n,l,c){let o,a=be(e);const u=a<n,h=l===0?1:Math.round(l*1e3/16),i=(n-a)/h;function m(){Qe(o)}function f(){a+=i,(u&&a>n||!u&&a<n)&&(a=n),_t(e,a),u&&a<n||!u&&a>n?o=Oe(f):c&&(o=Oe(c))}return f(),m}let ln=0;function Te(){const e=et(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++ln}`}function vt(e,n){if(!St||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{n(a[0].intersectionRatio>0)},{root:document.body}),c=()=>{e.value&&l.observe(e.value)},o=()=>{e.value&&l.unobserve(e.value)};wt(o),It(o),tt(c)}const[on,cn]=X("sticky"),rn={zIndex:N,position:ne("top"),container:Object,offsetTop:le(0),offsetBottom:le(0)};var sn=G({name:on,props:rn,emits:["scroll","change"],setup(e,{emit:n,slots:l}){const c=A(),o=De(c),a=Ie({fixed:!1,width:0,height:0,transform:0}),u=A(!1),h=V(()=>nt(e.position==="top"?e.offsetTop:e.offsetBottom)),i=V(()=>{if(u.value)return;const{fixed:g,height:_,width:b}=a;if(g)return{width:`${b}px`,height:`${_}px`}}),m=V(()=>{if(!a.fixed||u.value)return;const g=oe(at(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${h.value}px`});return a.transform&&(g.transform=`translate3d(0, ${a.transform}px, 0)`),g}),f=g=>n("scroll",{scrollTop:g,isFixed:a.fixed}),$=()=>{if(!c.value||_e(c))return;const{container:g,position:_}=e,b=te(c),I=be(window);if(a.width=b.width,a.height=b.height,_==="top")if(g){const x=te(g),L=x.bottom-h.value-a.height;a.fixed=h.value>b.top&&x.bottom>0,a.transform=L<0?L:0}else a.fixed=h.value>b.top;else{const{clientHeight:x}=document.documentElement;if(g){const L=te(g),k=x-L.top-h.value-a.height;a.fixed=x-h.value<b.bottom&&x>L.top,a.transform=k<0?-k:0}else a.fixed=x-h.value<b.bottom}f(I)};return Y(()=>a.fixed,g=>n("change",g)),me("scroll",$,{target:o,passive:!0}),vt(c,$),Y([lt,Tt],()=>{!c.value||_e(c)||!a.fixed||(u.value=!0,U(()=>{const g=te(c);a.width=g.width,a.height=g.height,u.value=!1}))}),()=>{var g;return s("div",{ref:c,style:i.value},[s("div",{class:cn({fixed:a.fixed&&!u.value}),style:m.value},[(g=l.default)==null?void 0:g.call(l)])])}}});const un=ae(sn),[dn,Ze]=X("tabs");var fn=G({name:dn,props:{count:Le(Number),inited:Boolean,animated:Boolean,duration:Le(N),swipeable:Boolean,lazyRender:Boolean,currentIndex:Le(Number)},emits:["change"],setup(e,{emit:n,slots:l}){const c=A(),o=h=>n("change",h),a=()=>{var h;const i=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?s(en,{ref:c,loop:!1,class:Ze("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},{default:()=>[i]}):i},u=h=>{const i=c.value;i&&i.state.active!==h&&i.swipeTo(h,{immediate:!e.inited})};return Y(()=>e.currentIndex,u),Ne(()=>{u(e.currentIndex)}),ce({swipeRef:c}),()=>s("div",{class:Ze("content",{animated:e.animated||e.swipeable})},[a()])}});const[gt,ke]=X("tabs"),hn={type:ne("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:le(0),duration:le(.3),animated:Boolean,ellipsis:ie,swipeable:Boolean,scrollspy:Boolean,offsetTop:le(0),background:String,lazyRender:ie,lineWidth:N,lineHeight:N,beforeChange:Function,swipeThreshold:le(5),titleActiveColor:String,titleInactiveColor:String},bt=Symbol(gt);var vn=G({name:gt,props:hn,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:l}){let c,o,a,u,h;const i=A(),m=A(),f=A(),$=A(),g=Te(),_=De(i),[b,I]=Jt(),{children:x,linkChildren:L}=it(bt),k=Ie({inited:!1,position:"",lineStyle:{},currentIndex:-1}),M=V(()=>x.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=V(()=>({borderColor:e.color,background:e.background})),y=(d,t)=>{var r;return(r=d.name)!=null?r:t},H=V(()=>{const d=x[k.currentIndex];if(d)return y(d,k.currentIndex)}),P=V(()=>nt(e.offsetTop)),S=V(()=>e.sticky?P.value+c:0),T=d=>{const t=m.value,r=b.value;if(!M.value||!t||!r||!r[k.currentIndex])return;const v=r[k.currentIndex].$el,C=v.offsetLeft-(t.offsetWidth-v.offsetWidth)/2;u&&u(),u=nn(t,C,d?0:+e.duration)},R=()=>{const d=k.inited;U(()=>{const t=b.value;if(!t||!t[k.currentIndex]||e.type!=="line"||_e(i.value))return;const r=t[k.currentIndex].$el,{lineWidth:v,lineHeight:C}=e,w=r.offsetLeft+r.offsetWidth/2,B={width:Se(v),backgroundColor:e.color,transform:`translateX(${w}px) translateX(-50%)`};if(d&&(B.transitionDuration=`${e.duration}s`),W(C)){const z=Se(C);B.height=z,B.borderRadius=z}k.lineStyle=B})},O=d=>{const t=d<k.currentIndex?-1:1;for(;d>=0&&d<x.length;){if(!x[d].disabled)return d;d+=t}},E=(d,t)=>{const r=O(d);if(!W(r))return;const v=x[r],C=y(v,r),w=k.currentIndex!==null;k.currentIndex!==r&&(k.currentIndex=r,t||T(),R()),C!==e.active&&(n("update:active",C),w&&n("change",C,v.title)),a&&!e.scrollspy&&Fe(Math.ceil(Ke(i.value)-P.value))},D=(d,t)=>{const r=x.find((C,w)=>y(C,w)===d),v=r?x.indexOf(r):0;E(v,t)},p=(d=!1)=>{if(e.scrollspy){const t=x[k.currentIndex].$el;if(t&&_.value){const r=Ke(t,_.value)-S.value;o=!0,h&&h(),h=an(_.value,r,d?0:+e.duration,()=>{o=!1})}}},j=(d,t,r)=>{const{title:v,disabled:C}=x[t],w=y(x[t],t);C||(At(e.beforeChange,{args:[w],done:()=>{E(t),p()}}),Lt(d)),n("clickTab",{name:w,title:v,event:r,disabled:C})},F=d=>{a=d.isFixed,n("scroll",d)},re=d=>{U(()=>{D(d),p(!0)})},J=()=>{for(let d=0;d<x.length;d++){const{top:t}=te(x[d].$el);if(t>S.value)return d===0?0:d-1}return x.length-1},Re=()=>{if(e.scrollspy&&!o){const d=J();E(d)}},$e=()=>{if(e.type==="line"&&x.length)return s("div",{class:ke("line"),style:k.lineStyle},null)},ye=()=>{var d,t,r;const{type:v,border:C,sticky:w}=e,B=[s("div",{ref:w?void 0:f,class:[ke("wrap"),{[Bt]:v==="line"&&C}]},[s("div",{ref:m,role:"tablist",class:ke("nav",[v,{shrink:e.shrink,complete:M.value}]),style:Z.value,"aria-orientation":"horizontal"},[(d=l["nav-left"])==null?void 0:d.call(l),x.map(z=>z.renderTitle(j)),$e(),(t=l["nav-right"])==null?void 0:t.call(l)])]),(r=l["nav-bottom"])==null?void 0:r.call(l)];return w?s("div",{ref:f},[B]):B},xe=()=>{R(),U(()=>{var d,t;T(!0),(t=(d=$.value)==null?void 0:d.swipeRef.value)==null||t.resize()})};Y(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],R),Y(lt,xe),Y(()=>e.active,d=>{d!==H.value&&D(d)}),Y(()=>x.length,()=>{k.inited&&(D(e.active),R(),U(()=>{T(!0)}))});const Be=()=>{D(e.active,!0),U(()=>{k.inited=!0,f.value&&(c=te(f.value).height),T(!0)})},Ae=(d,t)=>n("rendered",d,t);return ce({resize:xe,scrollTo:re}),Rt(R),$t(R),tt(Be),vt(i,R),me("scroll",Re,{target:_,passive:!0}),L({id:g,props:e,setLine:R,scrollable:M,onRendered:Ae,currentName:H,setTitleRefs:I,scrollIntoView:T}),()=>s("div",{ref:i,class:ke([e.type])},[e.sticky?s(un,{container:i.value,offsetTop:P.value,onScroll:F},{default:()=>[ye()]}):ye(),s(fn,{ref:$,count:x.length,inited:k.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:k.currentIndex,onChange:E},{default:()=>{var d;return[(d=l.default)==null?void 0:d.call(l)]}})])}});const gn=Symbol(),[bn,Xe]=X("tab"),mn=G({name:bn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:N,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:ie},setup(e,{slots:n}){const l=V(()=>{const o={},{type:a,color:u,disabled:h,isActive:i,activeColor:m,inactiveColor:f}=e;u&&a==="card"&&(o.borderColor=u,h||(i?o.backgroundColor=u:o.color=u));const g=i?m:f;return g&&(o.color=g),o}),c=()=>{const o=s("span",{class:Xe("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||W(e.badge)&&e.badge!==""?s(Et,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[o]}):o};return()=>s("div",{id:e.id,role:"tab",class:[Xe([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[c()])}}),[yn,Ee]=X("tab"),xn=oe({},ot,{dot:Boolean,name:N,badge:N,title:String,disabled:Boolean,titleClass:fe,titleStyle:[String,Object],showZeroBadge:ie});var Cn=G({name:yn,props:xn,setup(e,{slots:n}){const l=Te(),c=A(!1),o=et(),{parent:a,index:u}=We(bt);if(!a)return;const h=()=>{var b;return(b=e.name)!=null?b:u.value},i=()=>{c.value=!0,a.props.lazyRender&&U(()=>{a.onRendered(h(),e.title)})},m=V(()=>{const b=h()===a.currentName.value;return b&&!c.value&&i(),b}),f=A(""),$=A("");Vt(()=>{const{titleClass:b,titleStyle:I}=e;f.value=b?Ot(b):"",$.value=I&&typeof I!="string"?zt(Mt(I)):I});const g=b=>s(mn,He({key:l,id:`${a.id}-${u.value}`,ref:a.setTitleRefs(u.value),style:$.value,class:f.value,isActive:m.value,controls:l,scrollable:a.scrollable.value,activeColor:a.props.titleActiveColor,inactiveColor:a.props.titleInactiveColor,onClick:I=>b(o.proxy,u.value,I)},we(a.props,["type","color","shrink"]),we(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),_=A(!m.value);return Y(m,b=>{b?_.value=!1:Pt(()=>{_.value=!0})}),Y(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),ct(gn,m),ce({id:l,renderTitle:g}),()=>{var b;const I=`${a.id}-${u.value}`,{animated:x,swipeable:L,scrollspy:k,lazyRender:M}=a.props;if(!n.default&&!x)return;const Z=k||m.value;if(x||L)return s(tn,{id:l,role:"tabpanel",class:Ee("panel-wrapper",{inactive:_.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":I},{default:()=>{var P;return[s("div",{class:Ee("panel")},[(P=n.default)==null?void 0:P.call(n)])]}});const H=c.value||k||!M?(b=n.default)==null?void 0:b.call(n):null;return rt(s("div",{id:l,role:"tabpanel",class:Ee("panel"),tabindex:Z?0:-1,"aria-labelledby":I},[H]),[[st,Z]])}}});const kn=ae(Cn),_n=ae(vn),[Sn,se]=X("cell"),mt={tag:ne("div"),icon:String,size:String,title:N,value:N,label:N,center:Boolean,isLink:Boolean,border:ie,required:Boolean,iconPrefix:String,valueClass:fe,labelClass:fe,titleClass:fe,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},wn=oe({},mt,ot);var In=G({name:Sn,props:wn,setup(e,{slots:n}){const l=Dt(),c=()=>{if(n.label||W(e.label))return s("div",{class:[se("label"),e.labelClass]},[n.label?n.label():e.label])},o=()=>{var i;if(n.title||W(e.title)){const m=(i=n.title)==null?void 0:i.call(n);return Array.isArray(m)&&m.length===0?void 0:s("div",{class:[se("title"),e.titleClass],style:e.titleStyle},[m||s("span",null,[e.title]),c()])}},a=()=>{const i=n.value||n.default;if(i||W(e.value))return s("div",{class:[se("value"),e.valueClass]},[i?i():s("span",null,[e.value])])},u=()=>{if(n.icon)return n.icon();if(e.icon)return s(he,{name:e.icon,class:se("left-icon"),classPrefix:e.iconPrefix},null)},h=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const i=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return s(he,{name:i,class:se("right-icon")},null)}};return()=>{var i;const{tag:m,size:f,center:$,border:g,isLink:_,required:b}=e,I=(i=e.clickable)!=null?i:_,x={center:$,required:b,clickable:I,borderless:!g};return f&&(x[f]=!!f),s(m,{class:se(x),role:I?"button":void 0,tabindex:I?0:void 0,onClick:l},{default:()=>{var L;return[u(),o(),a(),h(),(L=n.extra)==null?void 0:L.call(n)]}})}}});const yt=ae(In);function xt(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Tn(e,n){if(xt(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function Rn(e,n){return new Promise(l=>{const c=n.validator(e,n);if(Nt(c)){c.then(l);return}l(c)})}function Ge(e,n){const{message:l}=n;return Ft(l)?l(e,n):l||""}function $n({target:e}){e.composing=!0}function Je({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Bn(e,n){const l=pe();e.style.height="auto";let c=e.scrollHeight;if(Wt(n)){const{maxHeight:o,minHeight:a}=n;o!==void 0&&(c=Math.min(c,o)),a!==void 0&&(c=Math.max(c,a))}c&&(e.style.height=`${c}px`,Fe(l))}function An(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function Q(e){return[...e].length}function Ve(e,n){return[...e].slice(0,n).join("")}const[Ln,q]=X("field"),je={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:N,formatter:Function,clearIcon:ne("clear"),modelValue:le(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:ne("focus"),formatTrigger:ne("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},En=oe({},mt,je,{rows:N,type:ne("text"),rules:Array,autosize:[Boolean,Object],labelWidth:N,labelClass:fe,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Vn=G({name:Ln,props:En,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l}){const c=Te(),o=Ie({status:"unvalidated",focused:!1,validateMessage:""}),a=A(),u=A(),h=A(),{parent:i}=We(Ht),m=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if(W(e[t]))return e[t];if(i&&W(i.props[t]))return i.props[t]},$=V(()=>{const t=f("readonly");if(e.clearable&&!t){const r=m()!=="",v=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return r&&v}return!1}),g=V(()=>h.value&&l.input?h.value():e.modelValue),_=t=>t.reduce((r,v)=>r.then(()=>{if(o.status==="failed")return;let{value:C}=g;if(v.formatter&&(C=v.formatter(C,v)),!Tn(C,v)){o.status="failed",o.validateMessage=Ge(C,v);return}if(v.validator)return xt(C)&&v.validateEmpty===!1?void 0:Rn(C,v).then(w=>{w&&typeof w=="string"?(o.status="failed",o.validateMessage=w):w===!1&&(o.status="failed",o.validateMessage=Ge(C,v))})}),Promise.resolve()),b=()=>{o.status="unvalidated",o.validateMessage=""},I=()=>n("endValidate",{status:o.status,message:o.validateMessage}),x=(t=e.rules)=>new Promise(r=>{b(),t?(n("startValidate"),_(t).then(()=>{o.status==="failed"?(r({name:e.name,message:o.validateMessage}),I()):(o.status="passed",r(),I())})):r()}),L=t=>{if(i&&e.rules){const{validateTrigger:r}=i.props,v=Ue(r).includes(t),C=e.rules.filter(w=>w.trigger?Ue(w.trigger).includes(t):v);C.length&&x(C)}},k=t=>{var r;const{maxlength:v}=e;if(W(v)&&Q(t)>+v){const C=m();if(C&&Q(C)===+v)return C;const w=(r=a.value)==null?void 0:r.selectionEnd;if(o.focused&&w){const B=[...t],z=B.length-+v;return B.splice(w-z,z),B.join("")}return Ve(t,+v)}return t},M=(t,r="onChange")=>{const v=t;t=k(t);const C=Q(v)-Q(t);if(e.type==="number"||e.type==="digit"){const B=e.type==="number";t=jt(t,B,B)}let w=0;if(e.formatter&&r===e.formatTrigger){const{formatter:B,maxlength:z}=e;if(t=B(t),W(z)&&Q(t)>+z&&(t=Ve(t,+z)),a.value&&o.focused){const{selectionEnd:Ce}=a.value,qe=Ve(v,Ce);w=Q(B(qe))-Q(qe)}}if(a.value&&a.value.value!==t)if(o.focused){let{selectionStart:B,selectionEnd:z}=a.value;if(a.value.value=t,W(B)&&W(z)){const Ce=Q(t);C?(B-=C,z-=C):w&&(B+=w,z+=w),a.value.setSelectionRange(Math.min(B,Ce),Math.min(z,Ce))}}else a.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},Z=t=>{t.target.composing||M(t.target.value)},y=()=>{var t;return(t=a.value)==null?void 0:t.blur()},H=()=>{var t;return(t=a.value)==null?void 0:t.focus()},P=()=>{const t=a.value;e.type==="textarea"&&e.autosize&&t&&Bn(t,e.autosize)},S=t=>{o.focused=!0,n("focus",t),U(P),f("readonly")&&y()},T=t=>{o.focused=!1,M(m(),"onBlur"),n("blur",t),!f("readonly")&&(L("onBlur"),U(P),Kt())},R=t=>n("clickInput",t),O=t=>n("clickLeftIcon",t),E=t=>n("clickRightIcon",t),D=t=>{ve(t),n("update:modelValue",""),n("clear",t)},p=V(()=>{if(typeof e.error=="boolean")return e.error;if(i&&i.props.showError&&o.status==="failed")return!0}),j=V(()=>{const t=f("labelWidth"),r=f("labelAlign");if(t&&r!=="top")return{width:Se(t)}}),F=t=>{t.keyCode===13&&(!(i&&i.props.submitOnEnter)&&e.type!=="textarea"&&ve(t),e.type==="search"&&y()),n("keypress",t)},re=()=>e.id||`${c}-input`,J=()=>o.status,Re=()=>{const t=q("control",[f("inputAlign"),{error:p.value,custom:!!l.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(l.input)return s("div",{class:t,onClick:R},[l.input()]);const r={id:re(),ref:a,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${c}-label`:void 0,onBlur:T,onFocus:S,onInput:Z,onClick:R,onChange:Je,onKeypress:F,onCompositionend:Je,onCompositionstart:$n};return e.type==="textarea"?s("textarea",r,null):s("input",He(An(e.type),r),null)},$e=()=>{const t=l["left-icon"];if(e.leftIcon||t)return s("div",{class:q("left-icon"),onClick:O},[t?t():s(he,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ye=()=>{const t=l["right-icon"];if(e.rightIcon||t)return s("div",{class:q("right-icon"),onClick:E},[t?t():s(he,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},xe=()=>{if(e.showWordLimit&&e.maxlength){const t=Q(m());return s("div",{class:q("word-limit")},[s("span",{class:q("word-num")},[t]),qt("/"),e.maxlength])}},Be=()=>{if(i&&i.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const r=l["error-message"],v=f("errorMessageAlign");return s("div",{class:q("error-message",v)},[r?r({message:t}):t])}},Ae=()=>{const t=f("labelWidth"),r=f("labelAlign"),v=f("colon")?":":"";if(l.label)return[l.label(),v];if(e.label)return s("label",{id:`${c}-label`,for:l.input?void 0:re(),onClick:C=>{ve(C),H()},style:r==="top"&&t?{width:Se(t)}:void 0},[e.label+v])},d=()=>[s("div",{class:q("body")},[Re(),$.value&&s(he,{ref:u,name:e.clearIcon,class:q("clear")},null),ye(),l.button&&s("div",{class:q("button")},[l.button()])]),xe(),Be()];return ce({blur:y,focus:H,validate:x,formValue:g,resetValidation:b,getValidationStatus:J}),ct(pt,{customValue:h,resetValidation:b,validateWithTrigger:L}),Y(()=>e.modelValue,()=>{M(m()),b(),L("onChange"),U(P)}),Ne(()=>{M(m(),e.formatTrigger),U(P)}),me("touchstart",D,{target:V(()=>{var t;return(t=u.value)==null?void 0:t.$el})}),()=>{const t=f("disabled"),r=f("labelAlign"),v=$e(),C=()=>{const w=Ae();return r==="top"?[v,w].filter(Boolean):w||[]};return s(yt,{size:e.size,class:q({error:p.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:j.value,valueClass:q("value"),titleClass:[q("label",[r,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:v&&r!=="top"?()=>v:null,title:C,value:d,extra:l.extra})}}});const Pn=ae(Vn);function On(){const e="A".charCodeAt(0);return Array(26).fill("").map((l,c)=>String.fromCharCode(e+c))}const[Ct,Pe]=X("index-bar"),zn={sticky:ie,zIndex:N,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Yt(0),indexList:{type:Array,default:On}},kt=Symbol(Ct);var Mn=G({name:Ct,props:zn,emits:["select","change"],setup(e,{emit:n,slots:l}){const c=A(),o=A(),a=A(""),u=Qt(),h=De(c),{children:i,linkChildren:m}=it(kt);let f;m({props:e});const $=V(()=>{if(W(e.zIndex))return{zIndex:+e.zIndex+1}}),g=V(()=>{if(e.highlightColor)return{color:e.highlightColor}}),_=(S,T)=>{for(let R=i.length-1;R>=0;R--){const O=R>0?T[R-1].height:0,E=e.sticky?O+e.stickyOffsetTop:0;if(S+E>=T[R].top)return R}return-1},b=S=>i.find(T=>String(T.index)===S),I=()=>{if(_e(c))return;const{sticky:S,indexList:T}=e,R=be(h.value),O=te(h),E=i.map(p=>p.getRect(h.value,O));let D=-1;if(f){const p=b(f);if(p){const j=p.getRect(h.value,O);D=_(j.top,E)}}else D=_(R,E);a.value=T[D],S&&i.forEach((p,j)=>{const{state:F,$el:re}=p;if(j===D||j===D-1){const J=re.getBoundingClientRect();F.left=J.left,F.width=J.width}else F.left=null,F.width=null;if(j===D)F.active=!0,F.top=Math.max(e.stickyOffsetTop,E[j].top-R)+O.top;else if(j===D-1&&f===""){const J=E[D].top-R;F.active=J>0,F.top=J+O.top-E[j].height}else F.active=!1}),f=""},x=()=>{U(I)};me("scroll",I,{target:h,passive:!0}),Ne(x),Y(()=>e.indexList,x),Y(a,S=>{S&&n("change",S)});const L=()=>e.indexList.map(S=>{const T=S===a.value;return s("span",{class:Pe("index",{active:T}),style:T?g.value:void 0,"data-index":S},[S])}),k=S=>{f=String(S);const T=b(f);if(T){const R=be(h.value),O=te(h),{offsetHeight:E}=document.documentElement;if(T.$el.scrollIntoView(),R===E-O.height){I();return}e.sticky&&e.stickyOffsetTop&&Fe(pe()-e.stickyOffsetTop),n("select",T.index)}},M=S=>{const{index:T}=S.dataset;T&&k(T)},Z=S=>{M(S.target)};let y;const H=S=>{if(u.move(S),u.isVertical()){ve(S);const{clientX:T,clientY:R}=S.touches[0],O=document.elementFromPoint(T,R);if(O){const{index:E}=O.dataset;E&&y!==E&&(y=E,M(O))}}},P=()=>s("div",{ref:o,class:Pe("sidebar"),style:$.value,onClick:Z,onTouchstartPassive:u.start},[L()]);return ce({scrollTo:k}),me("touchmove",H,{target:o}),()=>{var S;return s("div",{ref:c,class:Pe()},[e.teleport?s(Ut,{to:e.teleport},{default:()=>[P()]}):P(),(S=l.default)==null?void 0:S.call(l)])}}});const[Dn,Nn]=X("index-anchor"),Fn={index:N};var Wn=G({name:Dn,props:Fn,setup(e,{slots:n}){const l=Ie({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),c=A(),{parent:o}=We(kt);if(!o)return;const a=()=>l.active&&o.props.sticky,u=V(()=>{const{zIndex:i,highlightColor:m}=o.props;if(a())return oe(at(i),{left:l.left?`${l.left}px`:void 0,width:l.width?`${l.width}px`:void 0,transform:l.top?`translate3d(0, ${l.top}px, 0)`:void 0,color:m})});return ce({state:l,getRect:(i,m)=>{const f=te(c);return l.rect.height=f.height,i===window||i===document.body?l.rect.top=f.top+pe():l.rect.top=f.top+be(i)-m.top,l.rect}}),()=>{const i=a();return s("div",{ref:c,style:{height:i?`${l.rect.height}px`:void 0}},[s("div",{style:u.value,class:[Nn({sticky:i}),{[Zt]:i}]},[n.default?n.default():e.index])])}}});const Hn=ae(Wn),pn=ae(Mn),[jn,de,qn]=X("search"),Kn=oe({},je,{label:String,shape:ne("square"),leftIcon:ne("search"),clearable:ie,actionText:String,background:String,showAction:Boolean});var Un=G({name:jn,props:Kn,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l,attrs:c}){const o=Te(),a=A(),u=()=>{l.action||(n("update:modelValue",""),n("cancel"))},h=y=>{y.keyCode===13&&(ve(y),n("search",e.modelValue))},i=()=>e.id||`${o}-input`,m=()=>{if(l.label||e.label)return s("label",{class:de("label"),for:i()},[l.label?l.label():e.label])},f=()=>{if(e.showAction){const y=e.actionText||qn("cancel");return s("div",{class:de("action"),role:"button",tabindex:0,onClick:u},[l.action?l.action():y])}},$=()=>{var y;return(y=a.value)==null?void 0:y.blur()},g=()=>{var y;return(y=a.value)==null?void 0:y.focus()},_=y=>n("blur",y),b=y=>n("focus",y),I=y=>n("clear",y),x=y=>n("clickInput",y),L=y=>n("clickLeftIcon",y),k=y=>n("clickRightIcon",y),M=Object.keys(je),Z=()=>{const y=oe({},c,we(e,M),{id:i()}),H=P=>n("update:modelValue",P);return s(Pn,He({ref:a,type:"search",class:de("field"),border:!1,onBlur:_,onFocus:b,onClear:I,onKeypress:h,onClickInput:x,onClickLeftIcon:L,onClickRightIcon:k,"onUpdate:modelValue":H},y),we(l,["left-icon","right-icon"]))};return ce({focus:g,blur:$}),()=>{var y;return s("div",{class:de({"show-action":e.showAction}),style:{background:e.background}},[(y=l.left)==null?void 0:y.call(l),s("div",{class:de("content",e.shape)},[m(),Z()]),f()])}}});const Yn=ae(Un);const Zn={class:"city-group"},Xn={class:"list"},Gn=["onClick"],Jn={__name:"city-group",props:{groupData:{type:Object,default:()=>({})}},setup(e){const n=e,l=V(()=>{const u=n.groupData.cities.map(h=>h.group);return u.unshift("热门"),u}),c=dt(),o=ht(),a=u=>{o.currentCity=u,c.back()};return(u,h)=>{const i=Hn,m=yt,f=pn;return K(),ee("div",Zn,[s(f,{sticky:!1,"index-list":l.value},{default:ft(()=>[s(i,{index:"热门"}),ze("div",Xn,[(K(!0),ee(ue,null,ge(e.groupData.hotCities,($,g)=>(K(),ee("div",{class:"city",onClick:_=>a($)},Xt($.cityName),9,Gn))),256))]),(K(!0),ee(ue,null,ge(e.groupData.cities,($,g)=>(K(),ee(ue,{key:g},[s(i,{index:$.group},null,8,["index"]),(K(!0),ee(ue,null,ge($.cities,(_,b)=>(K(),Me(m,{key:b,title:_.cityName,onClick:I=>a(_)},null,8,["title","onClick"]))),128))],64))),128))]),_:1},8,["index-list"])])}}},Qn=ut(Jn,[["__scopeId","data-v-dc4e85a4"]]);const ea={class:"city top-page"},ta={class:"top"},na={class:"content"},aa={__name:"city",setup(e){const n=dt(),l=A(),c=A(""),o=()=>{n.back()},a=ht();a.fetchAllCitiesData();const{allCities:u}=Gt(a);return V(()=>u.value[l.value]),(h,i)=>{const m=Yn,f=kn,$=_n;return K(),ee("div",ea,[ze("div",ta,[s(m,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=g=>c.value=g),placeholder:"城市/区域/位置",shape:"round","show-action":"",onCancel:o},null,8,["modelValue"]),s($,{active:l.value,"onUpdate:active":i[1]||(i[1]=g=>l.value=g),color:"#ff9854","line-height":"3"},{default:ft(()=>[(K(!0),ee(ue,null,ge(Ye(u),(g,_,b)=>(K(),Me(f,{key:_,title:g.title,name:_},null,8,["title","name"]))),128))]),_:1},8,["active"])]),ze("div",na,[(K(!0),ee(ue,null,ge(Ye(u),(g,_,b)=>rt((K(),Me(Qn,{"group-data":g},null,8,["group-data"])),[[st,l.value===_]])),256))])])}}},ra=ut(aa,[["__scopeId","data-v-915f434d"]]);export{ra as default};
